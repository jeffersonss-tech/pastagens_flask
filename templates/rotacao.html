<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA RotaÃ§Ã£o - PastoFlow</title>
    <link rel="icon" type="image/x-icon" href="/static/icon/PastoFlow-logo.ico">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rotacao.css') }}">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div style="display: flex; align-items: center; gap: 20px;">
            <div>
                <h1>ğŸ§  IA RotaÃ§Ã£o</h1>
                <p style="opacity: 0.8; font-size: 0.9rem;">{{ fazenda.nome }}</p>
            </div>
            <div id="data-teste-display" class="data-teste-display modo-real" style="background: rgba(255, 193, 7, 0.2); border: 1px solid rgba(255, 193, 7, 0.5); border-radius: 6px; padding: 6px 12px; font-size: 0.8rem;">
                <span style="opacity: 0.7; font-size: 0.75rem;">Data: </span>
                <span id="data-teste-valor" style="color: #00d9ff; font-weight: bold;">Carregando...</span>
            </div>
        </div>
        <div>
            <a href="/fazenda/{{ fazenda.id }}">â† Voltar para Dashboard</a>
        </div>
    </div>
    
    <div class="content">
        <!-- Resumo Geral da Fazenda -->
        <div id="resumo-gerais" class="resumo-gerais">
            <div class="resumo-box lotes"><strong id="total-lotes">0</strong><span>ğŸ“‹ Lotes</span></div>
            <div class="resumo-box animais"><strong id="total-animais">0</strong><span>ğŸ„ Animais</span></div>
            <div class="resumo-box ocupada"><strong id="area-ocupada">0</strong><span>ğŸ”´ Ha Ocup.</span></div>
            <div class="resumo-box descanso"><strong id="area-descanso">0</strong><span>ğŸŸ¡ Ha Desc.</span></div>
            <div class="resumo-box altura"><strong id="media-altura">0</strong><span>ğŸ“ Alt. MÃ©dia</span></div>
            <div class="resumo-box prontos"><strong id="prontos">0</strong><span>ğŸŸ¢ Prontos</span></div>
            <div class="resumo-box criticos"><strong id="criticos">0</strong><span>ğŸ”´ CrÃ­ticos</span></div>
        </div>
        
        <!-- Stats -->
        <div class="stats-row">
            <div class="stat-box apto"><strong id="count-apto">0</strong><span>ğŸŸ¢ Apto</span></div>
            <div class="stat-box ocupacao"><strong id="count-ocupacao">0</strong><span>ğŸ”µ Ocupado</span></div>
            <div class="stat-box descanso"><strong id="count-descanso">0</strong><span>ğŸŸ¡ Descanso</span></div>
            <div class="stat-box proximo"><strong id="count-proximo">0</strong><span>ğŸŸ  PrÃ³ximo</span></div>
            <div class="stat-box saida"><strong id="count-saida">0</strong><span>ğŸ”´ SaÃ­da</span></div>
            <div class="stat-box bloqueado"><strong id="count-bloqueado">0</strong><span>ğŸŸ£ Bloqueado</span></div>
        </div>
        
        <!-- SeÃ§Ãµes de Listagem -->
        <div id="section-saida" class="section" style="display:none;">
            <h2>ğŸ”´ SAÃDA IMEDIATA</h2>
            <p style="color: #dc3545; margin-bottom: 15px;">âš ï¸ Estes piquetes precisam de aÃ§Ã£o URGENTE!</p>
            <div id="lista-saida"></div>
        </div>
        <div id="section-proximo" class="section" style="display:none;">
            <h2>ğŸŸ  PRÃ“XIMO DA SAÃDA</h2>
            <p style="color: #fd7e14; margin-bottom: 15px;">Planeje a saÃ­da em breve.</p>
            <div id="lista-proximo"></div>
        </div>
        <div id="section-ocupacao" class="section" style="display:none;">
            <h2>ğŸ”µ EM OCUPAÃ‡ÃƒO</h2>
            <p style="color: #007bff; margin-bottom: 15px;">Animais em pastejo.</p>
            <div id="lista-ocupacao"></div>
        </div>
        <div id="section-apto" class="section" style="display:none;">
            <h2>ğŸŸ¢ APTOS PARA ENTRADA</h2>
            <p style="color: #28a745; margin-bottom: 15px;">âœ… Prontos para receber animais!</p>
            <div id="lista-apto"></div>
        </div>
        <div id="section-descanso" class="section" style="display:none;">
            <h2>ğŸŸ¡ EM DESCANSO</h2>
            <p style="color: #ffc107; margin-bottom: 15px;">Em recuperaÃ§Ã£o.</p>
            <div id="lista-descanso"></div>
        </div>
        <div id="section-bloqueado" class="section" style="display:none;">
            <h2>ğŸŸ£ BLOQUEADOS</h2>
            <p style="color: #6f42c1; margin-bottom: 15px;">IndisponÃ­veis temporariamente.</p>
            <div id="lista-bloqueado"></div>
        </div>
        
        <!-- Legend -->
        <div class="legend">
            <div class="legend-item"><div class="legend-dot" style="background: #dc3545;"></div>ğŸ”´ SaÃ­da Imediata</div>
            <div class="legend-item"><div class="legend-dot" style="background: #fd7e14;"></div>ğŸŸ  PrÃ³ximo da SaÃ­da</div>
            <div class="legend-item"><div class="legend-dot" style="background: #007bff;"></div>ğŸ”µ Em OcupaÃ§Ã£o</div>
            <div class="legend-item"><div class="legend-dot" style="background: #28a745;"></div>ğŸŸ¢ Apto para Entrada</div>
            <div class="legend-item"><div class="legend-dot" style="background: #ffc107;"></div>ğŸŸ¡ Em Descanso</div>
            <div class="legend-item"><div class="legend-dot" style="background: #6f42c1;"></div>ğŸŸ£ Bloqueado</div>
        </div>
        
        <div class="actions-row">
            <button class="btn btn-primary" onclick="atualizar()">ğŸ”„ Atualizar</button>
            <button class="btn btn-warning" onclick="verificarPassouPonto()">âš ï¸ Verificar Passou Ponto</button>
        </div>
    </div>
    
    <script>const fazendaId = {{ fazenda.id }};</script>
    <script src="{{ url_for('static', filename='js/rotacao.js') }}"></script>
</body>
</html>